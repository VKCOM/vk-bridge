!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.vkConnect=n()}(this,function(){var e=["VKWebAppInit","VKWebAppGetCommunityAuthToken","VKWebAppAddToCommunity","VKWebAppGetUserInfo","VKWebAppSetLocation","VKWebAppGetClientVersion","VKWebAppGetPhoneNumber","VKWebAppGetEmail","VKWebAppGetGeodata","VKWebAppSetTitle","VKWebAppGetAuthToken","VKWebAppCallAPIMethod","VKWebAppJoinGroup","VKWebAppAllowMessagesFromGroup","VKWebAppDenyNotifications","VKWebAppAllowNotifications","VKWebAppOpenPayForm","VKWebAppOpenApp","VKWebAppShare","VKWebAppShowWallPostBox","VKWebAppScroll","VKWebAppResizeWindow","VKWebAppShowOrderBox","VKWebAppShowLeaderBoardBox","VKWebAppShowInviteBox","VKWebAppShowRequestBox","VKWebAppAddToFavorites"],n=[],o=null,t="undefined"!=typeof window,p=t&&window.webkit&&void 0!==window.webkit.messageHandlers&&void 0!==window.webkit.messageHandlers.VKWebAppClose,i=t?window.AndroidBridge:void 0,d=p?window.webkit.messageHandlers:void 0,r=t&&!i&&!d,s=r?"message":"VKWebAppEvent";t&&(window.CustomEvent||(window.CustomEvent=function(){function e(e,n){var o=n||{bubbles:!1,cancelable:!1,detail:void 0},t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!!o.bubbles,!!o.cancelable,o.detail),t}return e.prototype=Event.prototype,e}()),window.addEventListener(s,function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var p=[].concat(n);if(r&&e[0]&&"data"in e[0]){var i=function(e,n){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&-1===n.indexOf(t)&&(o[t]=e[t]);return o}(e[0].data,["webFrameId","connectVersion"]);i.type&&"VKWebAppSettings"===i.type?o=i.frameId:p.forEach(function(e){e({detail:i})})}else p.forEach(function(n){n.apply(null,e)})}));var a,u={send:function(e,n){void 0===n&&(n={}),i&&"function"==typeof i[e]&&i[e](JSON.stringify(n)),d&&d[e]&&"function"==typeof d[e].postMessage&&d[e].postMessage(n),r&&parent.postMessage({handler:e,params:n,type:"vk-connect",webFrameId:o,connectVersion:"1.5.5"},"*")},subscribe:function(e){n.push(e)},unsubscribe:function(e){var o=n.indexOf(e);o>-1&&n.splice(o,1)},isWebView:function(){return!(!i&&!d)},supports:function(n){return!(!i||"function"!=typeof i[n])||!(!d||!d[n]||"function"!=typeof d[n].postMessage)||!(d||i||!e.includes(n))}};return"object"==typeof exports&&"undefined"!=typeof module||((a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0).vkConnect=u,a.vkuiConnect=u),u});
